---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { Icon } from "astro-icon/components";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      #hello-input {
        border: none;
        background: transparent;

        font-family: "Courier Prime", "Courier New", Courier, monospace;
        font-size: 3em;
        font-weight: bold;
        margin: 0 0 0.5rem 0;
        color: var(--yellow);
        line-height: 1.2;
      }
      #hello-input:focus {
        outline: none;
      }
      #hello-reset {
        color: var(--text);
        background: transparent;
        border: none;
        cursor: pointer;
        transition: 0.2s;
      }
      #hello-reset:hover {
        transform: rotate(-30deg);
      }
    </style></head
  >
  <body>
    <Header />
    <main>
      <div style="display: flex; flex-wrap: wrap;">
        <h1>Hello,&nbsp;</h1>
        <input style="width: 23rem" id="hello-input" aria-label="Greeting" />
        <button id="hello-reset" type="button" hidden>
          <Icon name="reset" width="24" height="24" />
        </button>
      </div>
      <p>
        Welcome to the official <a href="https://astro.build/">Astro</a> blog starter
        template. This template serves as a lightweight, minimally-styled starting
        point for anyone looking to build a personal website, blog, or portfolio with
        Astro.
      </p>
      <p>
        This template comes with a few integrations already configured in your
        <code>astro.config.mjs</code> file. You can customize your setup with
        <a href="https://astro.build/integrations">Astro Integrations</a> to add tools
        like Tailwind, React, or Vue to your project.
      </p>
      <p>Here are a few ideas on how to get started with the template:</p>
      <ul>
        <li>Edit this page in <code>src/pages/index.astro</code></li>
        <li>
          Edit the site header items in <code>src/components/Header.astro</code>
        </li>
        <li>
          Add your name to the footer in <code>src/components/Footer.astro</code
          >
        </li>
        <li>
          Check out the included blog posts in <code>src/content/blog/</code>
        </li>
        <li>
          Customize the blog post page layout in <code
            >src/layouts/BlogPost.astro</code
          >
        </li>
      </ul>
      <p>
        Have fun! If you get stuck, remember to
        <a href="https://docs.astro.build/">read the docs</a>
        or <a href="https://astro.build/chat">join us on Discord</a> to ask questions.
      </p>
      <p>
        Looking for a blog template with a bit more personality? Check out
        <a href="https://github.com/Charca/astro-blog-template"
          >astro-blog-template</a
        >
        by <a href="https://twitter.com/Charca">Maxi Ferreira</a>.
      </p>
    </main>
    <Footer />
  </body><script>
    const hellos = [
      "Astronaut",
      "Traveller",
      "Wanderer",
      "Friend",
      "Explorer",
      "Adventurer",
    ];
    const randomHello = () => hellos[Math.floor(Math.random() * hellos.length)];
    const helloInput = document.getElementById(
      "hello-input",
    ) as HTMLInputElement;
    const helloReset = document.getElementById(
      "hello-reset",
    ) as HTMLButtonElement;
    const storageKey = "hello-heading-custom-text";
    const savedHello = localStorage.getItem(storageKey);
    const hasCustomHello =
      typeof savedHello === "string" && savedHello.trim().length > 0;

    helloInput.value = hasCustomHello ? savedHello : randomHello();
    helloReset.hidden = !hasCustomHello;

    console.log("hasCustomHello", hasCustomHello, savedHello);
    if (hasCustomHello) {
      const customHello = helloInput.value.trim();
      localStorage.setItem(storageKey, customHello);
      helloReset.hidden = false;
    }

    helloInput.addEventListener("input", () => {
      const customHello = helloInput.value.trim();
      if (customHello.length > 0) {
        localStorage.setItem(storageKey, customHello);
        return;
      }

      localStorage.removeItem(storageKey);
    });

    helloReset.addEventListener("click", () => {
      localStorage.removeItem(storageKey);
      helloInput.value = randomHello();
      helloReset.hidden = true;
    });
  </script>
</html>
